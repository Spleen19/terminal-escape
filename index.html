<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Terminal - Escape Game Progression</title>
  <style>
    body {
      background-color: black;
      color: #ffd700;
      font-family: "Courier New", Courier, monospace;
      padding: 20px;
    }
    #terminal {
      width: 100%;
      height: 80vh;
      overflow-y: auto;
      border: 1px solid #ffd700;
      padding: 10px;
      white-space: pre-wrap;
    }
    #input-line {
      display: flex;
      margin-top: 10px;
      display: none;
    }
    #prompt {
      margin-right: 5px;
    }
    input {
      background: black;
      border: none;
      color: #ffd700;
      font-family: inherit;
      font-size: 16px;
      width: 100%;
      outline: none;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <h2>üß† Terminal de D√©cryptage - Escape Game</h2>
  <div id="terminal"></div>
  <div id="input-line">
    <span id="prompt">>_</span>
    <input type="text" id="command" autofocus autocomplete="off" />
  </div>

  <script>
    const terminal = document.getElementById("terminal");
    const input = document.getElementById("command");
    const inputLine = document.getElementById("input-line");

    const introLines = [
      "Connexion au serveur s√©curis√©...",
      "Authentification en cours...",
      "Bypass du pare-feu...",
      "Acc√®s root obtenu...",
      "Chargement de l'interface du jeu..."
    ];

    const enigmes = [
      {
        question: "√ânigme 1 : J‚Äôai des cl√©s mais pas de serrure, j‚Äôai de l‚Äôespace mais pas de pi√®ce, on me tape mais je ne ressens rien. Qui suis-je ?",
        reponse: "clavier",
        code: "<strong>Code 1 d√©bloqu√© : GOURMAND</strong>"
      },
      {
        question: "√ânigme 2 : Je fais le tour du monde sans bouger. Qui suis-je ?",
        reponse: "timbre",
        code: "<strong>Code 2 d√©bloqu√© : GEEK</strong>"
      },
      {
        question: "√ânigme 3 : Plus je s√®che, plus je deviens mouill√©. Que suis-je ?",
        reponse: "serviette",
        code: "<strong>Code 3 d√©bloqu√© : PAS-DROLE</strong>"
      },
      {
        question: "√ânigme 4 : Je peux te sauver ou te trahir. Je peux √™tre dur ou doux. Que suis-je ?",
        reponse: "mot",
        code: "<strong>Code 4 d√©bloqu√© : BEAU-GOSSE</strong>"
      }
    ];

    let currentStep = 0;

    input.addEventListener("keydown", function(e) {
      if (e.key === "Enter") {
        const cmd = input.value.trim().toLowerCase();
        addLine(">_ " + cmd);
        processCommand(cmd);
        input.value = "";
      }
    });

    function addLine(text) {
      const p = document.createElement("p");
      p.innerHTML = text;
      terminal.appendChild(p);
      terminal.scrollTop = terminal.scrollHeight;
    }

    function processCommand(cmd) {
      if (cmd === "help") {
        if (currentStep < enigmes.length) {
          addLine(`Commande disponible : enigme${currentStep + 1}`);
        } else {
          addLine("‚úÖ Toutes les √©nigmes r√©solues ! Tape 'final' pour r√©v√©ler le message secret.");
        }
      } else if (cmd === `enigme${currentStep + 1}`) {
        addLine(enigmes[currentStep].question);
      } else if (cmd === "final") {
        if (currentStep === enigmes.length) {
          addLine("üîì <strong>F√âLICITATIONS TU ES VENU A BOUT DE CES √âNIGMES !</strong>");
          addLine("<strong>Mot de passe final : INDICE3</strong>");
          addLine("Fin de transmission. üõ°Ô∏è");
        } else {
          addLine("‚õî Tu n'as pas encore termin√© toutes les √©nigmes.");
        }
      } else if (cmd === "clear") {
        terminal.innerHTML = "<p>Terminal nettoy√©.</p>";
      } else {
        if (currentStep < enigmes.length && cmd === enigmes[currentStep].reponse) {
          addLine("‚úÖ Bonne r√©ponse !");
          addLine(enigmes[currentStep].code);
          currentStep++;
          if (currentStep < enigmes.length) {
            addLine(`Tape "help" pour d√©bloquer la suite...`);
          } else {
            addLine("üéâ Toutes les √©nigmes ont √©t√© r√©solues !");
            addLine("Tape 'final' pour r√©v√©ler le message de fin.");
          }
        } else {
          addLine("Commande inconnue ou mauvaise r√©ponse. Tape 'help' pour voir ce que tu peux faire.");
        }
      }
    }

    async function startIntro() {
      for (let line of introLines) {
        addLine(line);
        await new Promise(resolve => setTimeout(resolve, 1000));
      }
      addLine("Bienvenue, je te propose un nouveau jeu. Tape 'help' pour commencer ta mission.");
      inputLine.style.display = "flex";
    }

    startIntro();
  </script>
</body>
</html>
